<html>
  <head>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <script type="text/javascript" src="static/client.js"></script>
    <script type="text/javascript">

      google.charts.load('current', {'packages':['table']});
      $(document).ready(function() {
        google.charts.setOnLoadCallback(function() {
          load_page();
        });
      });

      function load_page() {
        $("#tabs").tabs({
          active: 0,
          disabled: [2, 3, 4],
          create: function (event, ui) {
            successCallback = function(data){
              drawVolunteersTable(data)
            }
            errorCallback = function(error){
              // TODO handle error
            }
            get_volunteer_list(successCallback, errorCallback);
          }
        });
      }

      function drawVolunteersTable(data) {
        var dataTable = new google.visualization.DataTable();
        dataTable.addColumn('number', 'Profile ID');
        dataTable.addColumn('string', 'Email');
        dataTable.addColumn('string', 'Last Name');
        dataTable.addColumn('string', 'First Name');
        dataTable.addColumn('string', 'Department');
        dataTable.addColumn('string', 'Role');
        dataTable.addColumn('string', 'Volunteer Type');
        dataTable.addColumn('boolean', 'Production');
        dataTable.addColumn('string', 'Phone');
        dataTable.addColumn('boolean', 'Got ticket');
        dataTable.addColumn('string', 'Action');

        $.each(data, function(i, item) {
          dataTable.addRow([
            item.user_id, 
            item.email,
            item.last_name,
            item.first_name,
            "Gate",
            "Volnteer",
            "Volnteer",
            true,
            "7327327321",
            item.got_ticket,
            "no action"
          ]);
        });

        var table = new google.visualization.Table(document.getElementById('table_div'));
        table.draw(dataTable, {width: '100%', height: '100%'});
      }
    </script>
  </head>
  <body>

     <!-- start tabs -->
    <div data-role="tabs" id="tabs">
      <ul>
        <li><a href="#list">Volunteers List</a></li>
        <li><a href="#add">Bulk Add Volunteers</a></li>
        <li><a href="#shift_conf">Shifts Configuration</a></li>
        <li><a href="#shift_scheduler">Shifts scheduler</a></li>
        <li><a href="#event">Event</a></li>
      </ul>

       <!-- list tab -->
      <div id="list">
        <div id="table_div"></div>
      </div>

       <!-- add tab -->
      <div id="add">
        TBD
      </div>

    </div>
    <!-- end tabs -->

  </body>
</html>